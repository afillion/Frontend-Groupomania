<ng-template [ngIf]="this.auth.isAuth">
  <mat-card class="card-container" *ngFor="let post of posts">
    <mat-card-header>
      <div mat-card-avatar class=""></div>
      <mat-card-title>{{ post.title }}</mat-card-title>
      <mat-card-subtitle>
        <p>
          <span>By {{ post.user.pseudo }} </span>
          <span> posté le: {{ post.createdAt | date:'medium'}} </span>
          <span> modifié le: {{ post.updatedAt | date:'medium'}}</span>
        </p>
      </mat-card-subtitle>
    </mat-card-header>
    <mat-card-content>
      <p>{{ post.txt }}</p>
    </mat-card-content>
    <mat-card-actions>
      <button mat-raised-button color="primary" [matBadge]="post.likes" matBadgePosition="before" matBadgeColor="accent"
      (click)="updateLikes(post.id, 1)">LIKE
        <mat-icon>thumb_up</mat-icon>
      </button>
      <button mat-raised-button color="primary" [matBadge]="post.dislikes" matBadgePosition="after" matBadgeColor="accent"
      (click)="updateLikes(post.id, -1)">DISLIKE
        <mat-icon>thumb_down</mat-icon>
      </button>
      <mat-accordion *ngFor="let comment of post.comments">
        <mat-expansion-panel (opened)="panelOpenState = true"
                             (closed)="panelOpenState = false">
          <mat-expansion-panel-header>
            <mat-panel-title>
              Self aware panel
            </mat-panel-title>
            <mat-panel-description>
              Currently I am {{panelOpenState ? 'open' : 'closed'}}
            </mat-panel-description>
          </mat-expansion-panel-header>
          <p>I'm visible because I am open</p>
        </mat-expansion-panel>
      </mat-accordion>
    </mat-card-actions>
  </mat-card>
</ng-template>

<pre>{{ posts | json }}</pre>
<pre>{{ this.store.localStorage | json }}</pre>